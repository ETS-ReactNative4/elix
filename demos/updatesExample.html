<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Reactive web component example</title>
  

  <template id="incrementDecrementTemplate">
    <button id="decrement">-</button>
    <span id="value"></span>
    <button id="increment">+</button>
  </template>

  <script type="module">
    import AttributeMarshallingMixin from '../src/AttributeMarshallingMixin.js';
    import ReactiveMixin from '../src/ReactiveMixin.js';
    import ShadowTemplateMixin from '../src/ShadowTemplateMixin.js';
    import * as symbols from '../src/symbols.js';

    // Create a native web component with reactive behavior.
    const Base =
      AttributeMarshallingMixin(
      ReactiveMixin(
      ShadowTemplateMixin(
        HTMLElement
      )));

    class IncrementDecrement extends Base {

      componentDidMount() {
        if (super.componentDidMount) { super.componentDidMount(); }
        this.$.decrement.addEventListener('click', () => {
          this.value--;
        });
        this.$.increment.addEventListener('click', () => {
          this.value++;
        });
      }

      // This property becomes the value of this.state at constructor time.
      get defaultState() {
        return Object.assign(super.defaultState, {
          value: 0
        });
      }

      // When state changes, render updates to the DOM.
      [symbols.render](changed) {
        super[symbols.render](changed);
        if (changed.value) {
          const value = state.value;
          this.style.color = value < 0 ? 'red' : null;
          this.$.value.textContent = value;
        }
      }

      // Provide a public property that gets/sets state.
      get value() {
        return this.state.value;
      }
      set value(value) {
        this.setState({
          value: parseInt(value)
        });
      }

      get [symbols.template]() {
        return incrementDecrementTemplate;
      }

    }

    customElements.define('increment-decrement', IncrementDecrement);
  </script>

</head>

<body>
  <increment-decrement value="0"></increment-decrement>
</body>

</html>
